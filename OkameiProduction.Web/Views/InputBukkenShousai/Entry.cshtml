@model Models.InputBukkenShousaiModel

@{
    ViewBag.Title = "Entry";
}

@Styles.Render("~/Content/InputBukkenShousai.css")

<h4 class="page-title">物件詳細登録</h4>
<div id="main" class="main-content">
    <div class="wrap-container">
        <div id="leftWrap1stPage">
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title pk">物件番号</label>
                </div>
                <div class="col-sm-8 form-inline">
                    <input type="text" class="form-control size8" disabled maxlength="8" id="BukkenNO" name="BukkenNO" value="@Model.BukkenNO" />
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title require">担当支店</label>
                </div>
                <div class="col-sm-8 form-inline">
                    @Html.DropDownListFor(
                    model => model.TantouSitenCD,
                    new SelectList(Model.TantouSitenDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control size39" })
                    <button type="button" id="btnSet" class="btn btn_search" nofocus>セット</button>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title require">物件名</label>
                </div>
                <div class="col-sm-8">
                    <input type="text" class="form-control size16" required maxlength="16" id="BukkenName" name="BukkenName" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">住所</label>
                </div>
                <div class="col-sm-8">
                    <input type="text" class="form-control size50" maxlength="50" id="Juusho" name="Juusho" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title require">工務店</label>
                </div>
                @*<div class="col-sm-8">
                    <select class="form-control size50" id="KoumutenName" name="KoumutenName">
                        <option></option>
                    </select>
                </div>*@
                <div class="col-sm-8">
                    <div class="dropdown">
                        <input type="text" class="form-control dropdown-toggle size50" data-toggle="dropdown" maxlength="50"
                               id="KoumutenName" name="KoumutenName" autocomplete="off">
                        <ul class="dropdown-menu" aria-labelledby="KoumutenName"></ul>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title require">加工坪数</label>
                </div>
                <div class="col-sm-8">
                    <input type="text" class="form-control size6" maxlength="6" id="KakouTubosuu" name="KakouTubosuu" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title require">納期</label>
                </div>
                <div class="col-sm-8 form-inline">
                    <input type="checkbox" id="NoukiMiteiKBN" value="1">
                    <label for="NoukiMiteiKBN">&nbsp;未定</label>
                    <input type="text" class="form-control size10" maxlength="10" id="Nouki" name="Nouki" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">運送会社倉庫入日</label>
                </div>
                <div class="col-sm-8">
                    <input type="text" class="form-control size10" maxlength="10" id="UnsouKuraireDate" name="UnsouKuraireDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">区分</label>
                </div>
                <div class="col-sm-8">
                    @Html.DropDownListFor(
                    model => model.KubunCD,
                    new SelectList(Model.KubunDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control size50" })
                </div>
            </div>
        </div>
        <div id="rightWrap1stPage">
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="TantouEigyouCD" class="col-form-label label-title require">担当営業マン</label>
                </div>
                <div class="col-sm-8">
                    <select class="form-control size50" id="TantouEigyouCD" name="TantouEigyouCD">
                        <option></option>
                    </select>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">担当PCサポート</label>
                </div>
                <div class="col-sm-8">
                    @Html.DropDownListFor(
                    model => model.TantouPcCD,
                    new SelectList(Model.TantouPcDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control size50" })
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">担当CADマン</label>
                </div>
                <div class="col-sm-8">
                    @Html.DropDownListFor(
                    model => model.TantouCadCD,
                    new SelectList(Model.TantouCadDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control size50" })
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="TantouEigyouCD" class="col-form-label label-title">入力先</label>
                </div>
                <div class="col-sm-8">
                    @Html.DropDownListFor(
                    model => model.NyuuryokusakiCD,
                    new SelectList(Model.NyuuryokusakiDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control size50" })
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">特注材有無</label>
                </div>
                <div class="col-sm-8">
                    @Html.DropDownListFor(
                    model => model.TokuchuuzaiUmu,
                    new SelectList(Model.TokuchuuzaiUmuDropDownListItems, "Value", "DisplayText"),
                    new { @class = "form-control size6" })
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">材料納期</label>
                </div>
                <div class="col-sm-8">
                    <input type="text" class="form-control size10" maxlength="10" id="ZairyouNouki" name="ZairyouNouki" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label label-title">特注材コメント</label>
                </div>
                <div class="col-sm-8">
                    <textarea class="form-control size50" rows="6" maxlength="300" id="TokuchuuzaiComment" name="TokuchuuzaiComment"></textarea>
                </div>
            </div>
        </div>
    </div>
    @*--------------------------------------------------*@
    <hr />
    <div class="wrap-container">
        <div id="leftWrap2ndPage">
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title require">受注日</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size10" maxlength="10" id="JuchuuDate" name="JuchuuDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">伏図提出(予定)日</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size10" maxlength="10" id="FusezuTeishutuDate" name="FusezuTeishutuDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">加工承認日</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size10" maxlength="10" id="KakouShouninDate" name="KakouShouninDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">木出し日</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size10" maxlength="10" id="KidasiDate" name="KidasiDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">加工指示書発行日</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size10" maxlength="10" id="KakousijishoHakkouDate" name="KakousijishoHakkouDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">完納日</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size10" maxlength="10" id="KannouDate" name="KannouDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">キャンセル日</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size10" maxlength="10" id="CancelDate" name="CancelDate" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">加工日数</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size3" maxlength="3" id="KakouNissuu" name="KakouNissuu" />
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label class="col-form-label label-title">最終更新日時</label>
                </div>
                <div class="col-sm-6">
                    <input type="text" class="form-control size19" disabled maxlength="19" id="UpdateDatetime" name="UpdateDatetime" />
                </div>
            </div>
        </div>
        <div id="rightWrap2ndPage">
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title">金物</label>
                </div>
                <div class="col-sm-3">
                    @Html.DropDownListFor(
                    model => model.KanamonoCD,
                    new SelectList(Model.KanamonoDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control size10" })
                </div>
            </div>
            <div class="form-group row blankline">
                <div class="col-sm-12">
                    <label class="col-form-label"></label>
                </div>
            </div>
            <div class="form-group row blankline">
                <div class="col-sm-12">
                    <label class="col-form-label"></label>
                </div>
            </div>
            <div class="form-group row blankline">
                <div class="col-sm-12">
                    <label class="col-form-label"></label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title require">横架材</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="OukazaiKakou" name="OukazaiKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="OukazaiSumi">
                    <label for="OukazaiSumi">&nbsp;済</label>
                </div>
                <div class="col-sm-3">
                    <label class="col-form-label label-title require ">壁</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="KabeKakou" name="KabeKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="KabeSumi" value="1">
                    <label for="KabeSumi">&nbsp;済</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title require">柱材</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="HasirazaiKakou" name="HasirazaiKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="HasirazaiSumi" value="1">
                    <label for="HasirazaiSumi">&nbsp;済</label>
                </div>
                <div class="col-sm-3">
                    <label class="col-form-label label-title require ">火打</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="HiuchiKakou" name="HiuchiKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="HiuchiSumi" value="1">
                    <label for="HiuchiSumi">&nbsp;済</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title require">羽柄材</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="HagarazaiKakou" name="HagarazaiKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="HagarazaiSumi" value="1">
                    <label for="HagarazaiSumi">&nbsp;済</label>
                </div>
                <div class="col-sm-6 clearfix">
                    <div class="float-right form-inline">
                        <input type="text" class="form-control size3" id="HagarazaiSuu" name="HagarazaiSuu" />
                        <span>&nbsp;本</span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title require">床</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="YukaKakou" name="YukaKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="YukaSumi" value="1">
                    <label for="YukaSumi">&nbsp;済</label>
                </div>
                <div class="col-sm-6 clearfix">
                    @Html.DropDownListFor(
                    model => model.YukaGouhanShurui,
                    new SelectList(Model.GoubanDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control float-left size34" })
                    <div class="float-right form-inline">
                        <input type="text" class="form-control size3" maxlength="3" id="YukaGouhanSuu" name="YukaGouhanSuu" />
                        <span>&nbsp;枚</span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title require">野地</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="NoziKakou" name="NoziKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="NoziSumi" value="1">
                    <label for="NoziSumi">&nbsp;済</label>
                </div>
                <div class="col-sm-6 clearfix">
                    @Html.DropDownListFor(
                    model => model.NoziGouhanShurui,
                    new SelectList(Model.GoubanDropDownListItems, "Value", "DisplayText"),
                    "",
                    new { @class = "form-control float-left size34" })
                    <div class="float-right form-inline">
                        <input type="text" class="form-control size3" maxlength="3" id="NoziGouhanSuu" name="NoziGouhanSuu" />
                        <span>&nbsp;枚</span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title">手加工</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="TekakouKakou" name="TekakouKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="TekakouSumi" value="1">
                    <label for="TekakouSumi">&nbsp;済</label>
                </div>
                <div class="col-sm-3">
                    <label class="col-form-label label-title">フンデガー</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <select class="form-control size2" id="HundeggerKakou" name="HundeggerKakou">
                        <option value="1">有</option>
                        <option value="0">無</option>
                    </select>
                    <input type="checkbox" id="HundeggerSumi" value="1">
                    <label for="HundeggerSumi">&nbsp;済</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <label class="col-form-label label-title">手加工推定時間</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <input type="text" class="form-control size5" maxlength="5" id="TekakouTime" name="TekakouTime" />
                </div>
                <div class="col-sm-3">
                    <label class="col-form-label label-title">フンデガー推定時間</label>
                </div>
                <div class="col-sm-3 form-inline">
                    <input type="text" class="form-control size5" maxlength="5" id="HundeggerTime" name="HundeggerTime" />
                </div>
            </div>
        </div>
    </div>
    @*--------------------------------------------------*@
    <hr />
    <div class="form-group row clearfix">
        <div class="col-sm-12">
            <button type="button" id="btnUpload" class="btn btn-secondary" nofocus>アップロード</button>
            <button type="button" id="btnDownload" class="btn btn-secondary float-right" nofocus>ダウンロード</button>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            <label class="col-form-label label-title">今回添付ファイル</label>
        </div>
        <div class="col-sm-10">
            <div class="custom-control custom-radio">
                <div class="radioWrap">
                    <input id="UpFileOption1" name="UpFileOption" type="radio" value="1" checked>
                    <label for="UpFileOption1" class="label-custom-radio">指示書・加工データ</label>
                </div>
                <div class="radioWrap">
                    <input id="UpFileOption2" name="UpFileOption" type="radio" value="2">
                    <label for="UpFileOption2" class="label-custom-radio">物件データ</label>
                </div>
                <div class="radioWrap">
                    <input id="UpFileOption3" name="UpFileOption" type="radio" value="3">
                    <label for="UpFileOption3" class="label-custom-radio">現地案内指示書・地図</label>
                </div>
                <div class="radioWrap">
                    <input id="UpFileOption4" name="UpFileOption" type="radio" value="4">
                    <label for="UpFileOption4" class="label-custom-radio">木出し</label>
                </div>
                <div class="radioWrap">
                    <input id="UpFileOption5" name="UpFileOption" type="radio" value="5">
                    <label for="UpFileOption5" class="label-custom-radio">金物</label>
                </div>
                <div class="radioWrap">
                    <input id="UpFileOption6" name="UpFileOption" type="radio" value="6">
                    <label for="UpFileOption6" class="label-custom-radio">最終CSV</label>
                </div>
                <div class="radioWrap">
                    <input id="UpFileOption7" name="UpFileOption" type="radio" value="7">
                    <label for="UpFileOption7" class="label-custom-radio">レビュー</label>
                </div>
                <div class="radioWrap">
                    <input id="UpFileOption8" name="UpFileOption" type="radio" value="8" checked>
                    <label for="UpFileOption8" class="label-custom-radio">今回添付無し</label>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
        </div>
        <div class="col-sm-10">
            <div id="upFileWrap">
                <div id="inputFile">
                    <p id="dropArea">ここにファイルをドロップしてアップロードしてください<br>または</p>
                    <div id="inputFileWrap">
                        <input type="file" name="uploadFile" id="uploadFile" nofocus>
                        <div id="btnInputFile"><span>ファイルを選択する</span></div>
                        <div id="btnChangeFile"><span>ファイルを変更する</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            <label class="col-form-label label-title">添付済ファイル</label>
        </div>
        <div class="col-sm-10">
            <div class="custom-control custom-radio">
                <div class="radioWrap">
                    <input id="DownFileOption1" name="DownFileOption" type="radio" value="1" checked>
                    <label for="DownFileOption1" class="label-custom-radio">指示書・加工データ</label>
                </div>
                <div class="radioWrap">
                    <input id="DownFileOption2" name="DownFileOption" type="radio" value="2">
                    <label for="DownFileOption2" class="label-custom-radio">物件データ</label>
                </div>
                <div class="radioWrap">
                    <input id="DownFileOption3" name="DownFileOption" type="radio" value="3">
                    <label for="DownFileOption3" class="label-custom-radio">現地案内指示書・地図</label>
                </div>
                <div class="radioWrap">
                    <input id="DownFileOption4" name="DownFileOption" type="radio" value="4">
                    <label for="DownFileOption4" class="label-custom-radio">木出し</label>
                </div>
                <div class="radioWrap">
                    <input id="DownFileOption5" name="DownFileOption" type="radio" value="5">
                    <label for="DownFileOption5" class="label-custom-radio">金物</label>
                </div>
                <div class="radioWrap">
                    <input id="DownFileOption6" name="DownFileOption" type="radio" value="6">
                    <label for="DownFileOption6" class="label-custom-radio">最終CSV</label>
                </div>
                <div class="radioWrap">
                    <input id="DownFileOption7" name="DownFileOption" type="radio" value="7">
                    <label for="DownFileOption7" class="label-custom-radio">レビュー</label>
                </div>
                <div class="radioWrap">
                    <input id="DownFileOption8" name="DownFileOption" type="radio" value="8" checked>
                    <label for="DownFileOption8" class="label-custom-radio">全て</label>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
        </div>
        <div class="col-sm-10">
            <table class='table table-bordered' id="tblFileList">
                <thead>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    @*--------------------------------------------------*@
    <hr />
    <div class="form-group row">
        <div class="col-sm-2">
            <label class="col-form-label label-title">コメント</label>
        </div>
        <div class="col-sm-10">
            <input type="text" class="form-control size100" maxlength="100" id="BukkenComment" name="BukkenComment" />
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            <label class="col-form-label label-title">コメント履歴</label>
        </div>
        <div class="col-sm-10">
            <table class='table table-bordered' id="tblBukkenCommentList">
                <thead></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <div class="form-group row">
        <div class="main-content-footer mx-auto">
            <button type="button" id="btnKakousiji" class="btn btn-info">加工指示</button>
            <button type="button" id="btnShoudakusho" class="btn btn-info">加工承諾書</button>
            <button type="button" id="btnJissekiNippou" class="btn btn-info">ﾌﾟﾚｶｯﾄ実績日報</button>
            <button type="button" id="btnReturn" class="btn btn-secondary" nofocus>戻る</button>
            <button type="button" id="btnSave" class="btn btn-primary active">登録</button>
        </div>
    </div>
</div>

@section Scripts{
    <script type="text/javascript">
        var btnReturn = $('#btnReturn');
        var btnSave = $('#btnSave');
        var btnSet = $('#btnSet');
        var txtBukkenNO = $('#BukkenNO');
        var txtBukkenName = $('#BukkenName');
        var txtTantouSitenCD = $('#TantouSitenCD');
        var tantouEigyouDDL = $('#TantouEigyouCD');
        var chkNoukiMitei = $('#NoukiMiteiKBN');
        var txtNouki = $('#Nouki');

        //------------------------------
        function addEvents() {
            btnReturn.click(function () {
                showConfirmMessage("Q003", function () {
                    if ('@Model.Mode' == 'New') {
                        location.href = '@Url.Action("Index", "Home")';
                    }
                    else {
                        location.href = '@Html.Raw(ViewBag.PreviousUrl)';
                    }
                });
            });

            btnSave.click(function () {
                if (checkErrorOnSave('#main') && checkBukkenNO()) {
                    showConfirmMessage('Q101', function () {
                        btnSaveClick();
                    });
                }
            });

            btnSet.click(function () {
                getNewBukkenNO();
            });

            txtTantouSitenCD.change(function () {
                var key = $(this).val();
                setDropDownList('#TantouEigyouCD', '@Url.Action("GetTantouEigyouDropDownListItems", "api/InputBukkenShousaiApi")', key);
                //setDropDownList('#KoumutenName', '@Url.Action("GetKoumutenDropDownListItems", "api/InputBukkenShousaiApi")', key);
                setAutocomplet('ul[aria-labelledby="KoumutenName"]', '@Url.Action("GetKoumutenDropDownListItems", "api/InputBukkenShousaiApi")', key);
            });

            chkNoukiMitei.change(function () {
                txtNouki.val('').setDisabled($(this).prop('checked'));
            });
        }

        function addValidate() {
            //必須チェック
            setRequired('#TantouSitenCD');
            setRequired('#BukkenName');
            setRequired('#KoumutenName');
            setRequired('#KakouTubosuu');
            setRequired('#Nouki');
            setRequired('#TantouEigyouCD');
            setRequired('#JuchuuDate');
            //日付チェック
            setDateTypeValidate('#Nouki')
            setDateTypeValidate('#UnsouKuraireDate')
            setDateTypeValidate('#ZairyouNouki')
            setDateTypeValidate('#JuchuuDate')
            setDateTypeValidate('#FusezuTeishutuDate')
            setDateTypeValidate('#KakouShouninDate')
            setDateTypeValidate('#KidasiDate')
            setDateTypeValidate('#KakousijishoHakkouDate')
            setDateTypeValidate('#KannouDate')
            setDateTypeValidate('#CancelDate')
            //半角チェック
            //setIsHalfWidthValidate('');
            //全角桁数チェック
            setDoubleByteValidate('#BukkenName', true);
            setDoubleByteValidate('#Juusho');
            setDoubleByteValidate('#TokuchuuzaiComment');
            setDoubleByteValidate('#BukkenComment');
            //数値チェック
            setNumericValidate('#KakouTubosuu', 3, 2)
            setNumericValidate('#KakouNissuu', 3, 0);
            setNumericValidate('#HagarazaiSuu', 3, 0);
            setNumericValidate('#YukazaiNumber', 3, 0);
            setNumericValidate('#NojizaiNumber', 3, 0);
            setNumericValidate('#TekakouTime', 3, 1);
            setNumericValidate('#HundeggerTime', 3, 1);
        }

        function setScreen(mode) {
            if (mode != 'New') {
                btnSet.hide();
            }

            if (mode == 'Delete') {
                setDisabledAll('#main');
            }
        }

        function getNewBukkenNO() {

            if (txtBukkenNO.val() != "") {
                txtBukkenName.focus();
                return;
            }

            if (txtTantouSitenCD.val() == "") {
                txtTantouSitenCD.focus();
                return;
            }

            var ret = calltoApiController('@Url.Action("GetBukkenNO", "api/InputBukkenShousaiApi")', txtTantouSitenCD.val());
            if (!ret) {
                return;
            }
            if (ret.MessageID) {
                showMessage(ret);
                return;
            }
            if (ret.NewBukkenNO) {
                txtBukkenNO.val(ret.NewBukkenNO);
                txtBukkenName.focus();
            }
        }

        function checkBukkenNO() {
            if (txtBukkenNO.val() == "") {
                txtTantouSitenCD.focus();
                showMessage('E288', function () { txtTantouSitenCD.focus(); });
                return false;
            }
            return true;
        }

        function btnSaveClick() {
            var model = {
                Mode: '@Model.Mode',
                BukkenNO: txtBukkenNO.val(),
                TantouSitenCD: txtTantouSitenCD.val(),
                BukkenName: txtBukkenName.val(),
                Juusho: $('#Juusho').val(),
                KoumutenName: $('#KoumutenName').val(),
                KakouTubosuu: $('#KakouTubosuu').val(),
                NoukiMiteiKBN: chkNoukiMitei.prop('checked'),
                Nouki: txtNouki.val(),
                UnsouKuraireDate: $('#UnsouKuraireDate').val(),
                KubunCD: $('#KubunCD').val(),
                TantouEigyouCD: tantouEigyouDDL.val(),
                TantouPcCD: $('#TantouPcCD').val(),
                TantouCadCD: $('#TantouCadCD').val(),
                NyuuryokusakiCD: $('#NyuuryokusakiCD').val(),
                TokuchuuzaiUmu: $('#TokuchuuzaiUmu').val(),
                ZairyouNouki: $('#ZairyouNouki').val(),
                TokuchuuzaiComment: $('#TokuchuuzaiComment').val(),
                //Page 2.
                JuchuuDate: $('#JuchuuDate').val(),
                FusezuTeishutuDate: $('#FusezuTeishutuDate').val(),
                KakouShouninDate: $('#KakouShouninDate').val(),
                KidasiDate: $('#KidasiDate').val(),
                KakousijishoHakkouDate: $('#KakousijishoHakkouDate').val(),
                KannouDate: $('#KannouDate').val(),
                CancelDate: $('#CancelDate').val(),
                KakouNissuu: $('#KakouNissuu').val(),
                UpdateDatetime: $('#UpdateDatetime').val(),
                KanamonoCD: $('#KanamonoCD').val(),
                OukazaiKakou: $('#OukazaiKakou').val(),
                OukazaiSumi: $('#OukazaiSumi').prop('checked'),
                KabeKakou: $('#KabeKakou').val(),
                KabeSumi: $('#KabeSumi').prop('checked'),
                HasirazaiKakou: $('#HasirazaiKakou').val(),
                HasirazaiSumi: $('#HasirazaiSumi').prop('checked'),
                HiuchiKakou: $('#HiuchiKakou').val(),
                HiuchiSumi: $('#HiuchiSumi').prop('checked'),
                HagarazaiKakou: $('#HagarazaiKakou').val(),
                HagarazaiSumi: $('#HagarazaiSumi').prop('checked'),
                HagarazaiSuu: $('#HagarazaiSuu').val(),
                YukaKakou: $('#YukaKakou').val(),
                YukaSumi: $('#YukaSumi').prop('checked'),
                YukaGouhanShurui: $('#YukaGouhanShurui').val(),
                YukaGouhanSuu: $('#YukaGouhanSuu').val(),
                NoziKakou: $('#NoziKakou').val(),
                NoziSumi: $('#NoziSumi').prop('checked'),
                NoziGouhanShurui: $('#NoziGouhanShurui').val(),
                NoziGouhanSuu: $('#NoziGouhanSuu').val(),
                HundeggerKakou: $('#HundeggerKakou').val(),
                HundeggerSumi: $('#HundeggerSumi').prop('checked'),
                TekakouTime: $('#TekakouTime').val(),
                HundeggerTime: $('#HundeggerTime').val(),
                //Page 3.
                //Page 4.
                BukkenComment: $('#BukkenComment').val(),
                UserID: $('#user-id').text()
            };

            var ret = calltoApiController('@Url.Action("SaveData", "api/InputBukkenShousaiApi")', model);
            if (!ret) {
                return false;
            }
            if (ret.MessageID) {
                showMessage(ret);
                return false;
            }
            showMessage("I101", function () {
                if ('@Model.Mode' == 'New') {
                    window.location.reload();
                }
                else {
                    location.href = '@Html.Raw(ViewBag.PreviousUrl)';
                }
            });
        }

        //------------------------------
        $(document).ready(function () {
            addEvents();
            addValidate();
            setScreen('@Model.Mode');

            if ('@Model.Mode' == 'Delete') {
                btnSave.focus();
            }
            else {
                txtTantouSitenCD.focus();
            }

        });

    </script>
}
